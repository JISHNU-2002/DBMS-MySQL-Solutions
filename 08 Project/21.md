# 21 MySQL & Python

- To connect MySQL with Python, you typically use a library like `mysql-connector-python` or `PyMySQL`

1. **Install the MySQL Connector**

```bash
pip install mysql-connector-python
```

```bash
pip install pymysql
```

2. **Import the MySQL Connector in Your Python Script**

```python
import mysql.connector
```

3. **Establish a Connection to the MySQL Database**
	- Use the `connect` method of `mysql.connector` to connect to your MySQL server

   ```python
   conn = mysql.connector.connect(
       host="your_host",           # e.g., "localhost" or IP address
       user="your_username",       # your MySQL username
       password="your_password",   # your MySQL password
       database="your_database"    # the database you want to use
   )
   ```

4. **Create a Cursor Object**
	- The cursor is used to execute SQL queries

```python
cursor = conn.cursor()
```

5. **Execute SQL Queries**
	- You can use the cursor to execute SQL commands

```python
cursor.execute("SELECT * FROM employees")
results = cursor.fetchall()

for row in results:
   print(row)
```

   - For inserting data

   ```python
   cursor.execute("INSERT INTO employees (name, department, salary) VALUES (%s, %s, %s)", ('New Employee', 'IT', 60000))
   conn.commit()  
   ```

6. **Close the Connection**

   ```python
   cursor.close()
   conn.close()
   ```

Here's a complete example:

```python
import mysql.connector

# Establish the connection
conn = mysql.connector.connect(
    host="localhost",
    user="root",
    password="mysql",
    database="DEMO"
)

# Create a cursor object
cursor = conn.cursor()

# Insert data into the table
cursor.execute("INSERT INTO employees (name, department, salary) VALUES (%s, %s, %s)", ('John Doe', 'HR', 55000))
conn.commit()  # Commit the changes

# Retrieve and print data from the table
cursor.execute("SELECT * FROM employees")
results = cursor.fetchall()
for row in results:
    print(row)

# Close the cursor and connection
cursor.close()
conn.close()
```

```python
import pymysql

# Establish the connection
conn = pymysql.connect(
    host="localhost",
    user="root",
    password="mysql",
    database="DEMO"
)

# Create a cursor object
cursor = conn.cursor()

# Insert data into the table
cursor.execute("INSERT INTO employees (name, department, salary) VALUES (%s, %s, %s)", ('John Doe', 'HR', 55000))
conn.commit()  # Commit the changes

# Retrieve and print data from the table
cursor.execute("SELECT * FROM employees")
results = cursor.fetchall()
for row in results:
    print(row)

# Close the cursor and connection
cursor.close()
conn.close()
```

7. **Verify the results**

```sql
USE my_database;
SELECT * FROM employees;
```

